/*! jQuery.herounit - v0.1.0 - 2013-05-29
* https://github.com/zamiang/jquery.herounit
* Copyright (c) 2013 Brennan Moore; Licensed MIT */
(function(){var e,t;e=function(){function e(e,t){var n,r,i,s,o=this;s=this.requires;for(r=0,i=s.length;r<i;r++){n=s[r];if(t[n]==null)throw"You must pass "+n}if(!(e.length>0))throw"Herounit must be called on an element";this.$el=e,this.settings=t,this.$img=this.settings.$img,this.detectPhone(),this.$img.load(function(){return o.render()}),this.onLoad(),this.$el.height(this.settings.height)}return e.prototype.requires=["height","$img"],e.prototype.optional=["afterImageLoadcont"],e.prototype.render=function(){return this.neutralizeImageSize(),this.setImageAttrs(),this.centerImage(),this.settings.afterImageLoadcont?this.settings.afterImageLoadcont():this.$img.show()},e.prototype.neutralizeImageSize=function(){return this.$img.css({height:"auto",width:"auto"})},e.prototype.setImageAttrs=function(){return this.naturalImageHeight=this.$img.height(),this.naturalImageWidth=this.$img.width(),this.imageRatio=this.naturalImageWidth/this.naturalImageHeight,this.minWidth=Math.floor(this.settings.height*this.imageRatio),this.height=this.settings.height||this.$el.height(),this.width=this.$el.width()},e.prototype.centerImage=function(){var e,t;return this.IS_PHONE?this.$img.width("auto"):this.width<this.minWidth?(e=-Math.floor((this.minWidth-this.width)/2),this.$img.width(this.minWidth)):(e=0,this.$img.width(this.width)),this.height>=this.$img.height()?t=0:t=-Math.abs(Math.floor((this.height-this.$img.height())/2)),this.$img.css({"margin-top":""+t+"px","margin-left":""+e+"px"})},e.prototype.onLoad=function(){var e=this;return this.IS_PHONE||$(window).on("resize.herounit",this.debounce(function(){return e.render()},100)),this.render()},e.prototype.debounce=function(e,t){var n;return n=0,function(){var r,i,s=this;return r=arguments,i=function(){return n=null,e(r)},clearTimeout(n),n=setTimeout(i,t)}},e.prototype.detectPhone=function(){return this.uagent=navigator.userAgent.toLowerCase(),this.IS_PHONE=this.uagent.search("iphone")>-1||this.uagent.search("ipod")>-1||this.uagent.search("android")>-1&&this.uagent.search("mobile")>-1},e}(),t={initialize:function(t){if(t==null)throw"You must pass settings";return this.heroUnit=new e($(this),t),this},destroy:function(){return $(window).off(".herounit"),this.heroUnit.destroy()},centerImage:function(){return this.heroUnit.centerImage()},render:function(){return this.heroUnit.render()},onLoad:function(){return this.heroUnit.onLoad()}},$.fn.herounit=function(e){return t[e]!=null?t[e].apply(this,Array.prototype.slice.call(arguments,1)):typeof e=="object"||e==null?t.initialize.apply(this,arguments):$.error("Method "+e+" does not exist on jQuery.herounit")}}).call(this);