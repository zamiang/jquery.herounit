/*! jQuery.herounit - v0.1.0 - 2013-01-06
* https://github.com/zamiang/jquery.herounit
* Copyright (c) 2013 Brennan Moore; Licensed MIT */
(function(){var e,t,n=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e,t){this.onLoad=n(this.onLoad,this),this.centerImage=n(this.centerImage,this),this.setWidthHeight=n(this.setWidthHeight,this),this.getImageSize=n(this.getImageSize,this);var r,i,s,o;o=this.requires;for(i=0,s=o.length;i<s;i++){r=o[i];if(t[r]==null)throw"You must pass "+r}if(!(e.length>0))throw"Herounit must be called on an element";this.$window=$(window),this.settings=t,this.$img=this.settings.$img,this.$coverArt=this.settings.$coverArt,this.fixedHeight=this.settings.fixedHeight,this.onLoad(),this.fixedHeight&&this.$el.height(this.fixedHeight)}return e.prototype.requires=["minHeight","$img","$coverArt"],e.prototype.optional=["fixedHeight","afterImageLoadcont"],e.prototype.getImageSize=function(){return this.$img.css({width:"auto"}),this.naturalImageHeight=this.$img.height(),this.naturalImageWidth=this.$img.width(),this.imageRatio=this.naturalImageWidth/this.naturalImageHeight,this.minWidth=(this.fixedHeight||this.minHeight)*this.imageRatio},e.prototype.setWidthHeight=function(){return this.height=this.fixedHeight||this.$el.height(),this.width=this.$el.width()},e.prototype.centerImage=function(){var e,t;return this.imageHeight=this.$img.height(),IS_IPHONE?this.$img.width("auto"):this.width<this.minWidth?(e=-Math.floor((this.minWidth-this.width)/2),this.$img.width(this.minWidth)):(e=0,this.$img.width(this.width)),(this.fixedHeight||this.height)>this.imageHeight?t=0:t=-Math.floor((this.imageHeight-this.height)/2),this.coverTop=t,this.$img.css({"margin-top":""+t+"px","margin-left":""+e+"px"})},e.prototype.onLoad=function(){var e=this;if(!this.IS_IOS)return this.$window.on("resize.coverArt",this.debounce(function(){return e.setWidthHeight(),e.centerImage()},50))},e.prototype.onUnload=function(){return this.$window.off(".coverArt")},e.prototype.debounce=function(e,t){var n;return n=0,function(){var r,i,s=this;return r=arguments,i=function(){return n=null,e(r)},clearTimeout(n),n=setTimeout(i,t)}},e.prototype.detectiOS=function(){var e;return e=navigator.userAgent.toLowerCase(),this.IS_IOS=e.match(/(iPhone|iPod|iPad)/i)!=null},e}(),t={initialize:function(t){if(t==null)throw"You must pass settings";return this.heroUnit=new e($(this),t),this},destroy:function(){return $(window).unbind("resize.herounit"),this.heroUnit.destroy()}},$.fn.herounit=function(e){return t[e]!=null?t[e].apply(this,Array.prototype.slice.call(arguments,1)):typeof e=="object"||e==null?t.initialize.apply(this,arguments):$.error("Method "+e+" does not exist on jQuery.herounit")}}).call(this);