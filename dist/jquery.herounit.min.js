/*! jQuery.herounit - v0.1.0 - 2013-01-06
* https://github.com/zamiang/jquery.herounit
* Copyright (c) 2013 Brennan Moore; Licensed MIT */
(function(){var e,t;e=function(){function e(e,t){var n,r,i,s,o=this;s=this.requires;for(r=0,i=s.length;r<i;r++){n=s[r];if(t[n]==null)throw"You must pass "+n}if(!(e.length>0))throw"Herounit must be called on an element";this.$el=e,this.settings=t,this.$img=this.settings.$img,this.$img.load(function(){return o.onImageLoad()}),this.onLoad(),this.$el.height(this.settings.height)}return e.prototype.requires=["height","$img"],e.prototype.optional=["afterImageLoadcont"],e.prototype.getImageSize=function(){return this.$img.css({width:"auto"}),this.naturalImageHeight=this.$img.height(),this.naturalImageWidth=this.$img.width(),this.imageRatio=this.naturalImageWidth/this.naturalImageHeight,this.minWidth=Math.floor(this.settings.height*this.imageRatio)},e.prototype.setWidthHeight=function(){return this.height=this.settings.height||this.$el.height(),this.width=this.$el.width()},e.prototype.centerImage=function(){var e,t;return this.imageHeight=this.$img.height(),window.IS_IPHONE?this.$img.width("auto"):this.width<this.minWidth?(e=-Math.floor((this.minWidth-this.width)/2),this.$img.width(this.minWidth)):(e=0,this.$img.width(this.width)),(this.settings.height||this.height)>this.imageHeight?t=0:t=-Math.floor((this.imageHeight-this.height)/2),this.coverTop=t,this.$img.css({"margin-top":""+t+"px","margin-left":""+e+"px"})},e.prototype.onImageLoad=function(){return this.getImageSize(),this.setWidthHeight(),this.centerImage(),this.centerImage(),this.settings.afterImageLoadcont?this.settings.afterImageLoadcont():this.$img.show()},e.prototype.onLoad=function(){var e=this;if(!this.IS_IOS)return $(window).on("resize.herounit",this.debounce(function(){return e.setWidthHeight(),e.centerImage()},50))},e.prototype.debounce=function(e,t){var n;return n=0,function(){var r,i,s=this;return r=arguments,i=function(){return n=null,e(r)},clearTimeout(n),n=setTimeout(i,t)}},e.prototype.detectiOS=function(){var e;return e=navigator.userAgent.toLowerCase(),this.IS_IOS=e.match(/(iPhone|iPod|iPad)/i)!=null},e}(),t={initialize:function(t){if(t==null)throw"You must pass settings";return this.heroUnit=new e($(this),t),this},destroy:function(){return $(window).off(".herounit"),this.heroUnit.destroy()},centerImage:function(){return this.heroUnit.centerImage()},onLoad:function(){return this.heroUnit.onLoad()}},$.fn.herounit=function(e){return t[e]!=null?t[e].apply(this,Array.prototype.slice.call(arguments,1)):typeof e=="object"||e==null?t.initialize.apply(this,arguments):$.error("Method "+e+" does not exist on jQuery.herounit")}}).call(this);