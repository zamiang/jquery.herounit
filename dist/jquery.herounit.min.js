/*! jQuery.herounit - v0.1.0 - 2013-05-30
* https://github.com/zamiang/jquery.herounit
* Copyright (c) 2013 Brennan Moore; Licensed MIT */
(function(){(function(e,t,n){var r,i;return i="heroUnit",r=function(){function n(e,t){var n,r,i,s,o=this;s=this.requires;for(r=0,i=s.length;r<i;r++){n=s[r];if(t[n]==null)throw"You must pass "+n}if(!(e.length>0))throw"Herounit must be called on an element";this.$el=e,this.settings=t,this.$img=this.settings.$img,this.detectPhone(),this.$img.load(function(){return o.render()}),this.onLoad(),this.$el.height(this.settings.height)}return n.prototype.requires=["height","$img"],n.prototype.optional=["afterImageLoadcont"],n.prototype.render=function(){var e;return this.neutralizeImageSize(),this.setImageAttrs(),this.centerImage(),this.$img.show(),typeof (e=this.settings).afterImageLoadcont=="function"?e.afterImageLoadcont():void 0},n.prototype.neutralizeImageSize=function(){return this.$img.css({height:"auto",width:"auto"})},n.prototype.setImageAttrs=function(){return this.naturalImageHeight=this.$img.height(),this.naturalImageWidth=this.$img.width(),this.imageRatio=this.naturalImageWidth/this.naturalImageHeight,this.minWidth=Math.floor(this.settings.height*this.imageRatio),this.height=this.settings.height||this.$el.height(),this.width=this.$el.width()},n.prototype.centerImage=function(){var e,t;return this.IS_PHONE?this.$img.width("auto"):this.width<this.minWidth?(e=-Math.floor((this.minWidth-this.width)/2),this.$img.width(this.minWidth)):(e=0,this.$img.width(this.width)),this.height>=this.$img.height()?t=0:t=-Math.abs(Math.floor((this.height-this.$img.height())/2)),this.$img.css({"margin-top":""+t+"px","margin-left":""+e+"px"})},n.prototype.onLoad=function(){var n=this;if(!this.IS_PHONE)return e(t).on("resize."+i,this.debounce(function(){return n.render()},100))},n.prototype.debounce=function(e,t){var n;return n=0,function(){var r,i,s=this;return r=arguments,i=function(){return n=null,e(r)},clearTimeout(n),n=setTimeout(i,t)}},n.prototype.detectPhone=function(){return this.uagent=navigator.userAgent.toLowerCase(),this.IS_PHONE=this.uagent.search("iphone")>-1||this.uagent.search("ipod")>-1||this.uagent.search("android")>-1&&this.uagent.search("mobile")>-1},n.prototype.destroy=function(){return e(t).off("."+i),this.$img.fadeOut(),e.removeData(this.$el,"plugin_"+i)},n}(),e.fn[i]=function(t){if(!e.data(this,"plugin_"+i)){if(t==null)throw"You must pass settings";return e.data(this,"plugin_"+i,new r(this,t))}if(e.data(this,"plugin_"+i)[t]!=null)return e.data(this,"plugin_"+i)[t](Array.prototype.slice.call(arguments,1)[0],Array.prototype.slice.call(arguments,1)[1]);throw"Method '"+t+"' does not exist on jQuery."+i}})(jQuery,window,document)}).call(this);